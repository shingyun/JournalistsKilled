var Point = require('../src/Point');
var Zone = require('../src/Zone');

var test = function (processorName, processor) {
	var image;

	processor.open(__dirname + '/test.jpg')
	.then(img => (image = img).getSize())
	.then(size => {
		console.log(`The picture does ${size.getWidth()} x ${size.getHeight()} with ${processorName}`)
		return image.crop(new Zone(new Point(25, 25), size.decrease(50)));
	})
	.then(image => image.saveJPEG(__dirname + '/test_' + processorName + '.jpg', 70))
	.then(image => console.log('Picture saved by ' + processorName))
	.catch(console.log);
}

var JimpProcessor = require('../Jimp/Processor');
test('Jimp', new JimpProcessor());

var ImageJsProcessor = require('../ImageJs/Processor');
test('ImageJs', new ImageJsProcessor());

/*
var LwipProcessor = require('../Lwip/Processor');
test('Lwip', new LwipProcessor());
*/